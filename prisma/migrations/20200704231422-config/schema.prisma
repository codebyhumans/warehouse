datasource db {
  provider = "sqlite"
  url = "***"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id               Int               @id @default(autoincrement())
  name             String
  password         String
  roles            Role[]            @relation(references: [id])
  ProductMovements ProductMovement[]
}

model Config {
  key String @unique
  value String 
}

model Role {
  id    Int    @id @default(autoincrement())
  name  String
  users User[] @relation(references: [id])
}

model Unit {
  id         Int        @id @default(autoincrement())
  name       String
  measure    String
  Products   Product[]
}

model Provider {
  id               Int               @id @default(autoincrement())
  name             String
  address          String?
  taxId            String? // unp / abn
  phone            String?
  email            String?
  bankName         String?
  bankAddress      String?
  bankMfo          String?
  bankExpense      String?
  ProductMovements ProductMovement[]
}

model Product {
  id               Int               @id @default(autoincrement())
  name             String
  qty              Int               @default(0)
  purchasePrice    Int               @default(0) // purchase price
  markup           Int               @default(0)
  category         Category          @relation(fields: [categoryId], references: [id])
  categoryId       Int
  unit             Unit              @relation(fields: [unitId], references: [id])
  unitId           Int
  ProductMovements ProductMovement[]
}

model Category {
  id         Int        @id @default(autoincrement())
  name       String
  order      Int?       @default(0)
  parentId   Int?
  Products   Product[]
}

model ProductMovement {
  id         Int      @id @default(autoincrement())
  number     String?
  qty        Int
  // type
  price      String
  comment    String?
  product    Product  @relation(fields: [productId], references: [id])
  productId  Int
  user       User     @relation(fields: [userId], references: [id])
  userId     Int
  provider   Provider @relation(fields: [providerId], references: [id])
  providerId Int
  createdAt  DateTime @default(now())
}
